---
title: Provision Dialogs
layout: post
---

# Setup

In a provider, a yaml file is created in the `content/miq_dialogs` folder. It follows a specific pattern and the fields within are not arbitrary. See the next section for details.

To tell manageiq what file to use for the dialog, create a provision_workflow.rb file within the cloud_manager folder of your plugin. Within that file create a class within your CloudManager namespace named `ProvisionWorkflow` and subclass `:MiqProvisionCloudWorkflow`. Use the abbreviated namespace syntax as the nested syntax will hang UI creation. i.e. `class ManageIQ::Providers::IbmCloud::VPC::CloudManager::ProvisionWorkflow < ::MiqProvisionCloudWorkflow`

WIthin the class add a class method named `self.default_dialog_file` that returns the name of the yaml template file, minus the yaml extension.

```
  def self.default_dialog_file
    'miq_provision_vpc_dialogs'
  end
```

# Defining the yaml template contents.

How the yaml file is processed for display is controlled by the haml files in the [manageiq-classic-ui](https://github.com/ManageIQ/manageiq-ui-classic) repo. The container definition is within the [_prov_dialog.html.haml](https://github.com/ManageIQ/manageiq-ui-classic/blob/master/app/views/shared/views/_prov_dialog.html.haml). From there depending on which container is being processed other files will be included. The most common is in [ prov_dialog_fieldset](https://github.com/ManageIQ/manageiq-ui-classic/blob/master/app/views/miq_request/_prov_dialog_fieldset.html.haml). The field definitions are from [_prov_field.html.haml](https://github.com/ManageIQ/manageiq-ui-classic/blob/master/app/views/miq_request/_prov_field.html.haml). The volumes container is defined in [prov_dialog_volume_fieldset.html.haml](https://github.com/ManageIQ/manageiq-ui-classic/blob/master/app/views/miq_request/_prov_dialog_volume_fieldset.html.haml). Use the [JSON schema](https://jaredm-ibm.github.io/miq_plugin_dev/schemas/cloud_manager_provision.json) in this repo to assist in creating the YAML file.

